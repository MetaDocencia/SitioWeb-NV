{{ define "main" }}
<article class="container mx-auto px-4 py-6">

  <!-- Encabezado del autor -->
  <header class="mb-4">
    <h1 class="text-3xl font-extrabold tracking-tight">{{ .Title }}</h1>
  </header>

  <!-- Contenido escrito en el _index.md del autor -->
  <div class="prose max-w-none">
    {{ .Content }}
  </div>

  {{/* === Listado minimalista de posts del autor ===
       Detectamos el key del autor por el nombre de carpeta (content/authors/<key>/).
       Filtramos p√°ginas que incluyan ese key en Params.authors y ordenamos por fecha desc. */}}
  {{ $authorKey := ( .File.Dir | strings.TrimSuffix "/" | path.Base ) }}
  {{ $pages := where .Site.RegularPages "Params.authors" "intersect" (slice $authorKey) | sort "Date" "desc" }}

  {{ if gt (len $pages) 0 }}
  <section class="mt-8">
    <h2 class="text-lg font-semibold mb-2">Blogpost</h2>
    <ul class="list-disc list-inside space-y-1">
      {{ range $pages }}
        <li>
          <a href="{{ .RelPermalink }}" class="underline hover:no-underline">
            {{ .Title }}
          </a>
        </li>
      {{ end }}
    </ul>
  </section>
  {{ end }}

</article>
{{ end }}
