{{/* 
  Shortcode: cta_fullwidth (full-bleed opcional)

  Parche rápido: fuerza la fuente del sitio SIN tocar SCSS
  - Usa var(--md-font-body, inherit) en el <section>
  - Evita resets tipográficos con `not-prose`
  - No fija font-family en ningún otro lugar
*/}}

{{- $id            := .Get "id"            | default "" -}}
{{- $title         := .Get "title"         | default "" -}}
{{- $text          := .Get "text"          | default "" -}}
{{- $btn_text      := .Get "button_text"   | default "" -}}
{{- $btn_url       := .Get "button_url"    | default "" -}}

{{- $bg            := .Get "bg"            | default "#C83737" -}}
{{- $fgDirect      := .Get "fg"            | default "" -}}
{{- $fgAlias       := .Get "color"         | default "" -}}  {{/* alias compat */}}
{{- $fgResolved    := cond (ne $fgDirect "") $fgDirect (cond (ne $fgAlias "") $fgAlias "#FFFFFF") -}}

{{- $btn_bg        := .Get "btn_bg"        | default "#FFFFFF" -}}
{{- $btn_fg        := .Get "btn_fg"        | default "#C83737" -}}

{{- $variant       := .Get "variant"       | default "background" -}} {{/* "background" | "card" */}}
{{- $maxw          := .Get "maxw"          | default "1600px" -}}
{{- $content_maxw  := .Get "content_maxw"  | default "1100px" -}}
{{- $align         := .Get "align"         | default "center" -}}
{{- $py            := .Get "py"            | default "0rem" -}}   {{/* base vertical, ej. "2.5rem" */}}
{{- $px            := .Get "px"            | default "clamp(1rem,4vw,3rem)" -}}

<section
  {{- if $id }} id="{{ $id }}"{{ end -}}
  class="mdnv-cta-fullwidth not-prose"
  data-variant="{{ $variant }}"
  style="
    font-family: var(--md-font-body, inherit);
    position:relative; left:50%; right:50%;
    margin-left:-50vw; margin-right:-50vw; width:100vw;
    {{- if eq $variant "background" -}}
      background: {{ $bg }};
      color: {{ $fgResolved }};
    {{- end -}}
  "
>
  <div style="max-width: {{ $maxw }}; margin: 0 auto;">
    <div
      class="{{ if eq $variant "card" }}mdnv-cta-card{{ end }}"
      style="
        max-width: {{ $content_maxw }};
        margin: 0 auto;
        text-align: {{ $align }};
        /* Extra de padding vertical en rem (≈10px): */
        padding-top: calc({{ $py }} + 0.625rem);
        padding-bottom: calc({{ $py }} + 0.625rem);
        padding-left: {{ $px }};
        padding-right: {{ $px }};
        {{- if eq $variant "card" -}}
          background: #ffffff;
          color: #111827;
          border-radius: 1rem;
          box-shadow: 0 1px 2px rgba(0,0,0,.08);
        {{- end -}}
      "
    >
      {{- if $title -}}
        <h2 class="font-extrabold tracking-tight text-2xl md:text-4xl drop-shadow-sm" style="{{ if eq $variant "background" }}color: {{ $fgResolved }};{{ end }} margin-top:0;">
          {{ $title | safeHTML }}
        </h2>
      {{- end -}}

      {{- if $text -}}
        <p style="margin-top:.5rem; margin-bottom:1rem;">{{ $text | safeHTML }}</p>
      {{- end -}}

      {{- if and $btn_text $btn_url -}}
        <a class="mdnv-cta-btn inline-block font-extrabold px-6 py-3 rounded-2xl shadow-lg no-underline focus:outline-none focus:ring-2"
           href="{{ $btn_url }}"
           style="
             background: {{ $btn_bg }}; 
             color: {{ $btn_fg }};
           ">
          {{ $btn_text }}
        </a>
      {{- end -}}

      {{- if .Inner -}}
        <div class="mdnv-cta-inner">
          {{ .Inner | markdownify }}
        </div>
      {{- end -}}
    </div>
  </div>
</section>

<style>
/* Interacciones y detalles menores (sin tocar font-family) */
.mdnv-cta-btn:hover { opacity: .92; }
.mdnv-cta-fullwidth a { text-decoration: none; }

/* Si es variante "card", el wrapper ya está estilizado inline. */
.mdnv-cta-fullwidth[data-variant="card"] .mdnv-cta-card {}

/* Refuerzo de herencia tipográfica dentro del CTA (no afecta SVG/íconos) */
.mdnv-cta-fullwidth :where(:not(svg, svg *, [class*="icon"])) { font-family: inherit; }
</style>
