{{/* layouts/partials/blocks/testimonials.html */}}
{{- $block := . -}}
{{- $id := $block.id | default (printf "testimonials-%d" now.Unix) -}}

<section id="{{ $id }}" class="section-testimonials {{ with $block.design.css_class }}{{ . }}{{ end }}" {{ with $block.design.css_style }}style="{{ . }}"{{ end }} aria-label="Testimonios">
  <div class="container mx-auto px-6 md:px-8 lg:px-10">

    {{ with $block.content.title }}
      <h2 class="text-2xl md:text-3xl font-extrabold tracking-tight mb-2">
        {{ . | $.Page.RenderString }}
      </h2>
    {{ end }}

    {{ with $block.content.text }}
      <div class="prose max-w-none mb-4 text-gray-700 dark:text-gray-200">
        {{ . | $.Page.RenderString }}
      </div>
    {{ end }}

    {{ $items := $block.content.items }}
    {{ if $items }}
      <div class="space-y-8">
        {{ range $items }}
          <article class="p-0">
            {{ with .name }}
              <div class="text-lg font-semibold leading-snug text-gray-900 dark:text-white">
                {{ . }}
              </div>
            {{ end }}

            {{ with .role }}
              <div class="text-sm text-gray-600 dark:text-gray-300 mt-0.5">
                {{ . | $.Page.RenderString }}
              </div>
            {{ end }}

            {{ with .text }}
              <!-- Clase específica para estilizar enlaces SOLO en el campo text -->
              <div class="mt-3 text-gray-800 dark:text-gray-100 testimonial-text">
                {{ . | $.Page.RenderString }}
              </div>
            {{ end }}
          </article>
        {{ end }}
      </div>
    {{ else }}
      <p class="text-sm text-gray-500 dark:text-gray-400">No hay testimonios aún.</p>
    {{ end }}

  </div>
</section>

<style>
  #{{ $id }} .prose iframe { width: 100% !important; aspect-ratio: 16 / 9; height: auto; }
  #{{ $id }} .prose img { height: auto; }

  /* Subrayado accesible SOLO para enlaces dentro del campo `text` */
  #{{ $id }} .testimonial-text a {
    text-decoration: underline;
    text-underline-offset: 0.15em;
    text-decoration-thickness: 1.5px;
  }
  #{{ $id }} .testimonial-text a:hover {
    text-decoration-thickness: 2px;
  }
  #{{ $id }} .testimonial-text a:focus-visible {
    outline: 2px solid currentColor;
    outline-offset: 2px;
  }
</style>
