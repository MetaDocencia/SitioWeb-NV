{{ define "main" }}
<section class="mx-auto px-6 py-10 max-w-6xl flex flex-col lg:flex-row gap-10">

  <!-- Contenido principal -->
  <div class="flex-1 min-w-0">
    <!-- Título -->
    <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight mb-6">
      {{ .Title }}
    </h1>

    <!-- Metadata (fecha + autores con nombres completos y links) -->
    <div class="mb-6 text-sm text-gray-500 dark:text-gray-400">
      {{ .Date.Format "2006-01-02" }}
      {{ $auth := .Params.authors }}
      {{ if $auth }}
        · {{ partial "authors-list.html" (dict "Page" . "Authors" $auth) }}
      {{ end }}
      {{/* Importante: NO mostramos tags aquí para no mezclarlos con autorías */}}
    </div>

    <!-- Contenido -->
    <div class="prose dark:prose-invert max-w-none
                prose-img:rounded-xl prose-img:mx-auto
                prose-video:mx-auto prose-iframe:mx-auto">

      <!-- Embeds responsivos (iframe / video) -->
      <style>
        .prose iframe,
        .prose video {
          width: 100% !important;
          height: auto !important;
          aspect-ratio: 16/9;
        }
        .prose figure > img { margin: 0 auto; height: auto; max-width: 100%; }
        .prose img { height: auto; max-width: 100%; }
      </style>

      {{ .Content }}
    </div>
  </div>

  <!-- Índice en el margen derecho (visible solo en pantallas grandes) -->
  {{ with .TableOfContents }}
  <aside class="hidden lg:block w-64 shrink-0">
    <div class="sticky top-24">
      <h2 class="text-sm font-semibold uppercase tracking-wide text-gray-700 dark:text-gray-300 mb-3">
        Contenido
      </h2>
      <nav class="text-sm leading-relaxed prose dark:prose-invert max-w-none">
        {{ . | safeHTML }}
      </nav>
    </div>
  </aside>
  {{ end }}

</section>
{{ end }}
